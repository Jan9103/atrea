<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"> 
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="box_style.css">
    <script defer type="module">
      import {g} from "./libs/xeact.js";
      import{cr,ce,n}from"./atrea.js";

      const new_box_recs=(click_event)=>{
        let alg_name=click_event.target.innerText.trim();
        window.top.postMessage(JSON.stringify({
          "action": "show_recs",
          "alg": alg_name,
        }));
      };

      const apply_res=res=>{
        let algos=g("algos");
        res.forEach((data)=>{
          var algo=n("div");
          var h2=n("h2");
          var btn=n("button");
          btn.onclick=new_box_recs;
          btn.innerText=data["name"];
          h2.appendChild(btn);
          algo.appendChild(h2);
          var pn=n("p");
          pn.innerText=data["description"];
          algo.appendChild(pn);
          pn=n("p");
          pn.innerText="Uses: "+data["used_data"].join(", ");
          algo.appendChild(pn);
          algos.appendChild(algo);
        });
      };

      fetch("api/recs/algorithms/general")
        .then(cr)
        .then(response=>response.json())
        .then(apply_res)
        .catch(ce);
    </script>
    <!--HEAD-->
  </head>
  <body>
    <h1>Recommendations</h1>
    <p>The main feature of ATREA: recommend channels to you based on your liked channels and the collected data.</p>
    <p>ATREA has multiple algorithms for recommending channels, each with its own strengths and weaknesses.</p>
    <h2>Algorithm List</h2>
    <div id="algos"></div>
  </body>
</html>
